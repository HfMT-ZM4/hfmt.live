<div class="quintetnet_div">
    <video id="localVideo" autoplay playsinline muted></video>
    <video id="quintetnet-1" autoplay playsinline muted></video>
    <video id="quintetnet-2" autoplay playsinline muted></video>
    <video id="quintetnet-3" autoplay playsinline muted></video>
    <video id="quintetnet-4" autoplay playsinline muted></video>
    <video id="quintetnet-5" autoplay playsinline muted></video>
</div>

<script>
    const url_args = new URLSearchParams(window.location.search);
    console.log(`hello user ${url_args.get('id')}`);


    async function streamHandler(stream, kind, id) {
        console.log('----> received stream ');
return;
        const tag = kind + '-' + id;

        let el = $('#' + tag);

        if (!el) {
            el = document.createElement(kind);
            el.setAttribute('playsinline', '');
            el.setAttribute('autoplay', '');
            //el.setAttribute('muted', '');
            //el.setAttribute('controls', true);

            el.id = tag;

            el.srcObject = stream;

            $(`#videos`).appendChild(el);

            await el.play()
                .catch((error) => {
                    console.error('elememt failed to play:', error, el);
                    el.setAttribute('controls', '');
                });

        }

    }

    drawsocket.on_newPeerStream = async (stream, kind, id) => {
        streamHandler(stream, kind, id);
    }


    function init() {

        let ui_div = document.getElementById('default_ui');
        let localUI_div = document.getElementById('local_ui');

        ui_div.innerHTML = "";
        localUI_div.innerHTML = "";

        console.log( drawsocket.getMediaStreams() );
/*

        const streams = drawsocket.getMediaStreams();
        const videoIds = Object.keys(streams.video);
        if (videoIds.length > 0) {
            const firstStream = streams.video[videoIds[0]];
            streamHandler(firstStream.stream, 'video', videoIds[0]);
        }
*/

    }



    init();


</script>