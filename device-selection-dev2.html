
<html>
    <head>
    </head>
<body>

    <script>

        let localMediaStream;
        let audioID = "default", videoID = "default";

        let audioDevcies = {};
        let videoDevices = {};

        async function getDevices () {

            if (localMediaStream)
                return;

            try {

                localMediaStream = await navigator.mediaDevices.getUserMedia({
                    video: true,
                    audio: true
                });

                let devices = await navigator.mediaDevices.enumerateDevices();

                devices.forEach(function(device) {

                        console.log(device.kind + ": " + device.label +
                                    " id = " + device.deviceId);
                });
                
            }
            catch (e) {
                console.error('start camera error', e);
            }

            console.log(localMediaStream);
        }

        drawsocket.input({
            key: "html",
            val: {
                new: "button",
                id: "queryDevices",
                parent: "forms",
                text: "Select IO Devices",
                onclick: "getDevices()"
            }
        })

        //document.getElementById('queryDevices').addEventListener('click', getDevices )

    </script>
</body>
</html>
