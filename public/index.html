<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">

  <link rel="apple-touch-icon" sizes="180x180" href="https://hfmt.live/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="https://hfmt.live/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="https://hfmt.live/favicon/favicon-16x16.png">
  <link rel="manifest" href="https://hfmt.live/favicon/site.webmanifest">

  <link rel="stylesheet" href="css/drawsocket-web.css">
  <link rel="stylesheet" href="css/soup.css">

</head>

<body>

  <div id="videos"></div>

  <!--drawsocket -->
  <div id="drawsocket">

      <div id="touchdiv"></div>
      <div id="main-div">

          <div id="main-html"></div>

          <svg id="svg" version="1.1" baseProfile="full" xmlns="http://www.w3.org/2000/svg"
              xmlns:xlink="http://www.w3.org/1999/xlink">

              <defs id="defs"></defs>
              <g id="main-svg"></g>

          </svg>

      </div>
      <div id="forms"></div>

      <div id="statusDiv" class="log"></div>
  </div>

  <!-- control panel -->
    <div id="default_ui">
        <img src="icons/video-solid.svg" id="video_icon" class="icon"  />
        <div id="stream_button_div" class="ui">
            <button id="btn_connect">Connect</button>
            <button id="btn_start">Start Webcam</button>
        </div>
        <div id="file_buttons" class="ui">
            <input multiple type="file" accept=".json,.html,.js,.svg" id="input_sendfile" style="display:none">
            <button id="btn_sendfile">Share File</button>
            <select name="parts" id="select_part">
                <option value="">-- no file loaded --</option>
            </select>
            <button id="btn_drawsocket">drawsocket-msg-out</button>

            <div id="message_panel" style="display: none;">
                <textarea id="drawsocket_output_text"></textarea>
                <button id="btn_drawsocket_send">send</button>
            </div>
        </div>
    </div>
      <!--
      <button id="btn_screen">Share Screen</button>
   -->

  </div>


    <!-- local video -->
    <div id="local_ui">
        <video id="localVideo" autoplay playsinline muted></video>
        <div id="camera-info"></div>
        <canvas id="oscilloscope"></canvas>   
    </div>

    <div id="device_selection" class="modal">
      <div class="modal-content">
          <span class="close">&times;</span>

          <select name="sel_video" id="sel_video">
              <option value="">-- video device list --</option>
          </select> 
          <select name="sel_audio" id="sel_audio">
              <option value="">-- audio device list --</option>
          </select> 

          <button id="start_stream">Start Stream</button>

      </div>
    </div>


  <script>
      window.localStorage.setItem('debug', 'mediasoup-client:WARN* mediasoup-client:ERROR*');
    //window.localStorage.setItem('debug', 'mediasoup-client:*');
  </script>


  <!--
      <div class="log" id="log">hello there</div>

  <script src="https://hfmt.live/scripts/socket.io-client/dist/socket.io.js"></script>
  <script src="https://hfmt.live/js/socket-ping.js"></script>
  -->
  <script>
        let video_icon = document.getElementById("video_icon");
        video_icon.addEventListener("click", () => {
            console.log("click");

            let streamDiv = document.getElementById('stream_button_div');
            streamDiv.style.display = "inline-block";
            /*
            window.onclick = function(event) {
                if (event.target != streamDiv) {
                    streamDiv.style.display = "none";
                }
            }
            */
        });
  </script>
  <script src="https://hfmt.live/js/root.drawsocket.bundle.js"></script>
</body>
</html>
